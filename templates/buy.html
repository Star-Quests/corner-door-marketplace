{% extends "base.html" %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <a href="{{ url_for('product_detail', product_id=product.id) }}" class="btn btn-secondary">‚Üê Back to Product</a>
    
    <div class="order-info" style="margin-top: 2rem;">
        <h2>Purchase: {{ product.title }}</h2>
        
        <div class="price-display">
            <div class="usd-price">${{ "%.2f"|format(product.price_usd) }} USD</div>
            <div class="crypto-prices">
                {% for crypto, amount in crypto_amounts.items() %}
                <div class="crypto-price">
                    <span class="amount">{{ "%.6f"|format(amount) if crypto == 'BTC' else "%.4f"|format(amount) if crypto == 'ETH' else "%.2f"|format(amount) }}</span> {{ crypto }}
                </div>
                {% endfor %}
            </div>
        </div>
        
        <form method="POST">
            <div class="form-group">
                <label for="crypto_type">Select Cryptocurrency:</label>
                <select class="form-control" id="crypto_type" name="crypto_type" required>
                    <option value="BTC">Bitcoin (BTC) - {{ "%.6f"|format(crypto_amounts.BTC) }} BTC</option>
                    <option value="ETH">Ethereum (ETH) - {{ "%.4f"|format(crypto_amounts.ETH) }} ETH</option>
                    <option value="SOL">Solana (SOL) - {{ "%.2f"|format(crypto_amounts.SOL) }} SOL</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="delivery_location">Delivery Location Instructions:</label>
                <textarea class="form-control" id="delivery_location" name="delivery_location" 
                         rows="4" placeholder="Describe where you want the package delivered..." required></textarea>
            </div>
            
            <button type="submit" class="btn">Continue to Payment</button>
        </form>
    </div>
</div>
{% endblock %}